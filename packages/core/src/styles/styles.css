/*
 * Copyright (c) 2026 Tylium.
 * SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-TELF
 * See LICENSE.md for details.
 */

@import url("themes.css");

/* ==========================================================================
   SVG and Icon Styles
   ========================================================================== */

/* Prevent text selection in SVG content (scoped to library components only) */
.audioui svg text,
.audioui svg foreignObject div {
    -webkit-user-select: none;
    user-select: none;
    cursor: default;
}

/* Make inline SVGs in knob content inherit text color (scoped to library components only) */
/* This works for inline <svg> elements and SVG components from libraries like react-icons */
.audioui svg foreignObject div svg {
    fill: currentColor;
    color: inherit;
    /* Ensure SVG icons scale down to fit, creating a visual margin */
    max-width: 75%;
    max-height: 75%;
}

/* Icon wrapper class for HTML overlay - ensures SVG icons fill their container */
/* Used by CycleButton and other components that render icons in the overlay */
.audioui-icon-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Ensure SVG icons inside the wrapper fill the container and inherit color */
/* Icons automatically inherit text color via currentColor */
.audioui-icon-wrapper svg {
    width: 100%;
    height: 100%;
    fill: currentColor;
    color: inherit;
}

/* ==========================================================================
   Component Base Classes
   ========================================================================== */

/* Root class for all AudioUI components */
.audioui {
    font-family: var(--audioui-font-family);
    font-size: var(--audioui-font-size);
    font-weight: var(--audioui-font-weight);
    -webkit-user-select: none;
    user-select: none;
    cursor: default;
}

/* Container helper class for components that manage their own SVG sizing */
.audioui-component-container {
    height: auto;
    max-width: 100%;
    max-height: 100%;
}

/* Remove default outline from SVG elements */
.audioui-component-container svg {
    height: auto;
    outline: none;
}

/* ==========================================================================
   Interactive States and Accessibility
   ========================================================================== */

/* Highlight effect for interactive components */
/* Uses --audioui-highlight-effect from themes.css (user-customizable) */
/*
 * CSS isolation on text and foreignObject elements prevents the filter from affecting them,
 * allowing the filter to affect only the SVG graphics (paths, circles, etc.) without
 * requiring manual filter resets. This is cleaner than resetting filters on each element type.
 */
.audioui-highlight {
    will-change: filter;
    /* Fast transition for realtime audio UI - instant feedback preferred */
    transition: filter var(--audioui-highlight-transition-duration) linear;
}

/* Apply highlight on hover OR when focused (keyboard/click) */
/* The actual effect is defined by --audioui-highlight-effect in themes.css */
/* Using :is() for cleaner selector grouping (modern browsers) */
.audioui-highlight:hover,
.audioui-highlight:focus,
.audioui-highlight:focus-visible {
    filter: var(--audioui-highlight-effect);
    outline: none; /* Remove default browser focus ring */
}

/* Prevent filter from affecting text elements by isolating them */
.audioui-highlight text {
    isolation: isolate;
}

/* Prevent filter from affecting foreignObject elements (HTML content) by isolating them */
.audioui-highlight foreignObject {
    isolation: isolate;
}

/* ==========================================================================
   Color Utility Classes
   ========================================================================== */

/* Base utility classes - only work if --audioui-primary-color is set by user */
.audioui-stroke-primary {
    stroke: var(--audioui-primary-color);
}

.audioui-fill-text {
    fill: var(--audioui-text-color);
}

.audioui-fill-primary {
    fill: var(--audioui-primary-color);
}

.audioui-fill-transparent {
    fill: transparent;
}

.audioui-border-primary {
    border-color: var(--audioui-primary-color);
}

.audioui-text-primary {
    color: var(--audioui-primary-color);
}

/* ==========================================================================
   Image Dark Mode Support
   ========================================================================== */

/* Light mode: show light image, hide dark image */
.audioui-image-light {
    display: block;
}

.audioui-image-dark {
    display: none;
}

/* Dark mode (.dark class): hide light image, show dark image */
.dark .audioui-image-dark {
    display: block;
}

.dark .audioui-image-light {
    display: none;
}

/* Also support system preference when .dark class not present */
@media (prefers-color-scheme: dark) {
    :root:not(.dark) .audioui-image-dark {
        display: block;
    }
    :root:not(.dark) .audioui-image-light {
        display: none;
    }
}

/* ==========================================================================
   Size Utility Classes
   ========================================================================== */

/* Square components (Button, Knob, CycleButton) - 1x1 aspect ratio */
.audioui-size-square-xsmall {
    width: var(--audioui-size-square-xsmall);
    height: var(--audioui-size-square-xsmall);
}

.audioui-size-square-small {
    width: var(--audioui-size-square-small);
    height: var(--audioui-size-square-small);
}

.audioui-size-square-normal {
    width: var(--audioui-size-square-normal);
    height: var(--audioui-size-square-normal);
}

.audioui-size-square-large {
    width: var(--audioui-size-square-large);
    height: var(--audioui-size-square-large);
}

.audioui-size-square-xlarge {
    width: var(--audioui-size-square-xlarge);
    height: var(--audioui-size-square-xlarge);
}

/* Horizontal Slider (1x2 aspect ratio - width > height) */
.audioui-size-hslider-xsmall {
    width: var(--audioui-size-hslider-width-xsmall);
    height: var(--audioui-size-hslider-height-xsmall);
}

.audioui-size-hslider-small {
    width: var(--audioui-size-hslider-width-small);
    height: var(--audioui-size-hslider-height-small);
}

.audioui-size-hslider-normal {
    width: var(--audioui-size-hslider-width-normal);
    height: var(--audioui-size-hslider-height-normal);
}

.audioui-size-hslider-large {
    width: var(--audioui-size-hslider-width-large);
    height: var(--audioui-size-hslider-height-large);
}

.audioui-size-hslider-xlarge {
    width: var(--audioui-size-hslider-width-xlarge);
    height: var(--audioui-size-hslider-height-xlarge);
}

/* Vertical Slider (2x1 aspect ratio - height > width) */
.audioui-size-vslider-xsmall {
    width: var(--audioui-size-vslider-width-xsmall);
    height: var(--audioui-size-vslider-height-xsmall);
}

.audioui-size-vslider-small {
    width: var(--audioui-size-vslider-width-small);
    height: var(--audioui-size-vslider-height-small);
}

.audioui-size-vslider-normal {
    width: var(--audioui-size-vslider-width-normal);
    height: var(--audioui-size-vslider-height-normal);
}

.audioui-size-vslider-large {
    width: var(--audioui-size-vslider-width-large);
    height: var(--audioui-size-vslider-height-large);
}

.audioui-size-vslider-xlarge {
    width: var(--audioui-size-vslider-width-xlarge);
    height: var(--audioui-size-vslider-height-xlarge);
}

/* Keys (1x5 aspect ratio - width > height) */
.audioui-size-keys-xsmall {
    width: var(--audioui-size-keys-width-xsmall);
    height: var(--audioui-size-keys-height-xsmall);
}

.audioui-size-keys-small {
    width: var(--audioui-size-keys-width-small);
    height: var(--audioui-size-keys-height-small);
}

.audioui-size-keys-normal {
    width: var(--audioui-size-keys-width-normal);
    height: var(--audioui-size-keys-height-normal);
}

.audioui-size-keys-large {
    width: var(--audioui-size-keys-width-large);
    height: var(--audioui-size-keys-height-large);
}

.audioui-size-keys-xlarge {
    width: var(--audioui-size-keys-width-xlarge);
    height: var(--audioui-size-keys-height-xlarge);
}
