@import url("themes.css");

:root {
    --audioui-text-color: hsl(0, 0%, 10%);
    --audioui-default-font-size: 14px;
    /* --audioui-primary-color is optional - users can set it if they want to use utility classes */
}

/* Dark mode text color */
.dark {
    --audioui-text-color: hsl(0, 0%, 96%);
}

textarea input {
    color: var(--audioui-text-color);
    background-color: transparent;
    font-size: var(--audioui-default-font-size);
}

svg text,
svg foreignObject div {
    -webkit-user-select: none;
    user-select: none;
    cursor: default;
}

/* Make inline SVGs in knob content inherit text color */
/* This works for inline <svg> elements and SVG components from libraries like react-icons */
svg foreignObject div svg {
    fill: currentColor;
    color: inherit;
    /* Ensure SVG icons scale down to fit, creating a visual margin */
    max-width: 75%;
    max-height: 75%;
}

/* For icon components (like react-icons) that render SVGs, ensure they inherit color */
svg foreignObject div > * svg {
    fill: currentColor;
    color: inherit;
}

.audioui {
    -webkit-user-select: none;
    user-select: none;
    cursor: default;
}

.audioui-component-container {
    height: auto;
    max-width: 100%;
    max-height: 100%;
}

/* Accessibility Focus Styles */
.audioui-component-container svg {
    height: auto;
    outline: none; /* Remove default outline */
}

/* Only show focus ring when navigating via keyboard */
.audioui-component-container svg:focus-visible {
    /* Instead of a ring, use the highlight effect */
    outline: none;
    /* Apply the same filter boost as hover */
    filter: brightness(1.15) contrast(1.05)
        drop-shadow(
            0 0 0.5em color-mix(in srgb, var(--audioui-primary-color, var(--audioui-text-color)) 35%, transparent)
        );
}

.audioui-highlight {
    will-change: filter;
    /* Fast transition for realtime audio UI - instant feedback preferred */
    transition: filter 50ms linear;
    cursor: pointer;
}

/* Apply highlight on hover OR when focused (keyboard/click) */
.audioui-highlight:hover,
.audioui-highlight:focus-within {
    /* Optimized hover effect for edition mode */
    /* Brightness and contrast boost for better visibility */
    filter: brightness(1.15) contrast(1.05)
        /* Subtle glow using primary color if available, otherwise adaptive text color */
        drop-shadow(
            0 0 0.5em color-mix(in srgb, var(--audioui-primary-color, var(--audioui-text-color)) 35%, transparent)
        );
    outline: none; /* Ensure no default ring */
}

/* Prevent blur effect from affecting text elements */
.audioui-highlight:hover text,
.audioui-highlight:focus-within text {
    filter: none;
}

/* Reset foreignObject filter on hover, but preserve img filters */
.audioui-highlight:hover foreignObject,
.audioui-highlight:focus-within foreignObject {
    filter: none;
}

/* Ensure img filters are preserved even when foreignObject filter is reset on hover */
.audioui-highlight:hover foreignObject div img,
.audioui-highlight:focus-within foreignObject div img {
    filter: brightness(0);
}

.dark .audioui-highlight:hover foreignObject div img,
.dark .audioui-highlight:focus-within foreignObject div img {
    filter: none;
}


/* Base utility classes - only work if --audioui-primary-color is set by user */
.audioui-stroke-primary {
    stroke: var(--audioui-primary-color);
}

.audioui-fill-text {
    fill: var(--audioui-text-color);
}

.audioui-fill-primary {
    fill: var(--audioui-primary-color);
}

.audioui-fill-transparent {
    fill: transparent;
}

/* Border utilities */
.audioui-border-primary {
    border-color: var(--audioui-primary-color);
}

/* Text color utilities */
.audioui-text-primary {
    color: var(--audioui-primary-color);
}

/* Size utility classes - Square components (Button, Knob, KnobSwitch) */
.audioui-size-square-xsmall {
    width: var(--audioui-size-square-xsmall);
    height: var(--audioui-size-square-xsmall);
}

.audioui-size-square-small {
    width: var(--audioui-size-square-small);
    height: var(--audioui-size-square-small);
}

.audioui-size-square-normal {
    width: var(--audioui-size-square-normal);
    height: var(--audioui-size-square-normal);
}

.audioui-size-square-large {
    width: var(--audioui-size-square-large);
    height: var(--audioui-size-square-large);
}

.audioui-size-square-xlarge {
    width: var(--audioui-size-square-xlarge);
    height: var(--audioui-size-square-xlarge);
}

/* Size utility classes - Horizontal Slider (1x3) */
.audioui-size-hslider-xsmall {
    width: var(--audioui-size-hslider-width-xsmall);
    height: var(--audioui-size-hslider-height-xsmall);
}

.audioui-size-hslider-small {
    width: var(--audioui-size-hslider-width-small);
    height: var(--audioui-size-hslider-height-small);
}

.audioui-size-hslider-normal {
    width: var(--audioui-size-hslider-width-normal);
    height: var(--audioui-size-hslider-height-normal);
}

.audioui-size-hslider-large {
    width: var(--audioui-size-hslider-width-large);
    height: var(--audioui-size-hslider-height-large);
}

.audioui-size-hslider-xlarge {
    width: var(--audioui-size-hslider-width-xlarge);
    height: var(--audioui-size-hslider-height-xlarge);
}

/* Size utility classes - Vertical Slider (3x1) */
.audioui-size-vslider-xsmall {
    width: var(--audioui-size-vslider-width-xsmall);
    height: var(--audioui-size-vslider-height-xsmall);
}

.audioui-size-vslider-small {
    width: var(--audioui-size-vslider-width-small);
    height: var(--audioui-size-vslider-height-small);
}

.audioui-size-vslider-normal {
    width: var(--audioui-size-vslider-width-normal);
    height: var(--audioui-size-vslider-height-normal);
}

.audioui-size-vslider-large {
    width: var(--audioui-size-vslider-width-large);
    height: var(--audioui-size-vslider-height-large);
}

.audioui-size-vslider-xlarge {
    width: var(--audioui-size-vslider-width-xlarge);
    height: var(--audioui-size-vslider-height-xlarge);
}

/* Size utility classes - Keybed (1x5) */
.audioui-size-keybed-xsmall {
    width: var(--audioui-size-keybed-width-xsmall);
    height: var(--audioui-size-keybed-height-xsmall);
}

.audioui-size-keybed-small {
    width: var(--audioui-size-keybed-width-small);
    height: var(--audioui-size-keybed-height-small);
}

.audioui-size-keybed-normal {
    width: var(--audioui-size-keybed-width-normal);
    height: var(--audioui-size-keybed-height-normal);
}

.audioui-size-keybed-large {
    width: var(--audioui-size-keybed-width-large);
    height: var(--audioui-size-keybed-height-large);
}

.audioui-size-keybed-xlarge {
    width: var(--audioui-size-keybed-width-xlarge);
    height: var(--audioui-size-keybed-height-xlarge);
}
